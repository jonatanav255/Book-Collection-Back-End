spring:
  application:
    name: bookshelf-backend

  datasource:
    url: jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:bookshelf}
    username: ${DB_USERNAME:postgres}
    password: ${DB_PASSWORD:postgres}
    driver-class-name: org.postgresql.Driver

  jpa:
    hibernate:
      ddl-auto: validate
    show-sql: false
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true

  flyway:
    enabled: true
    baseline-on-migrate: true
    locations: classpath:db/migration

  servlet:
    multipart:
      enabled: true
      max-file-size: 100MB
      max-request-size: 100MB

server:
  port: ${SERVER_PORT:8080}
  tomcat:
    max-http-form-post-size: 105MB
    max-swallow-size: 105MB

bookshelf:
  cors:
    allowed-origins: ${CORS_ORIGINS:http://localhost:3000}

  # JWT authentication configuration
  # - secret: Base64-encoded signing key for HMAC-SHA256. MUST be overridden in production
  #   via the JWT_SECRET environment variable. The default below is for local development only.
  # - access-token-expiration: How long access tokens are valid (in milliseconds).
  #   Default: 900000ms = 15 minutes.
  # - refresh-token-expiration: How long refresh tokens are valid (in milliseconds).
  #   Default: 604800000ms = 7 days.
  jwt:
    secret: ${JWT_SECRET:dGhpcy1pcy1hLWRldi1vbmx5LWp3dC1zZWNyZXQta2V5LXRoYXQtaXMtbG9uZy1lbm91Z2gtZm9yLWhzMjU2}
    access-token-expiration: ${JWT_ACCESS_EXPIRATION:900000}
    refresh-token-expiration: ${JWT_REFRESH_EXPIRATION:604800000}
  storage:
    pdf-directory: ${PDF_STORAGE_DIR:./data/bookshelf/pdfs}
    thumbnail-directory: ${THUMBNAIL_STORAGE_DIR:./data/bookshelf/thumbnails}
    audio-directory: ${AUDIO_STORAGE_DIR:./data/bookshelf/audio}

google:
  books:
    api:
      key: ${GOOGLE_BOOKS_API_KEY:}
  cloud:
    text-to-speech:
      voice-name: ${TTS_VOICE_NAME:en-US-Studio-Q}
      language-code: ${TTS_LANGUAGE_CODE:en-US}
      speaking-rate: ${TTS_SPEAKING_RATE:1.0}
      pitch: ${TTS_PITCH:0.0}

rate-limit:
  requests-per-minute: ${RATE_LIMIT_RPM:120}
  cleanup-interval-minutes: ${RATE_LIMIT_CLEANUP_MINUTES:10}

springdoc:
  api-docs:
    path: /v3/api-docs
  swagger-ui:
    path: /swagger-ui.html
    tags-sorter: alpha
    operations-sorter: method

logging:
  level:
    com.bookshelf: INFO
    org.springframework.web: INFO
    org.apache.fontbox: "OFF"
    org.apache.pdfbox.pdmodel.font.FileSystemFontProvider: ERROR
